(this.webpackJsonpnew_breaktime_management=this.webpackJsonpnew_breaktime_management||[]).push([[0],{100:function(e,t,n){},137:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),r=n.n(c),i=n(8),s=n.n(i),o=(n(99),n(100),n(9)),l=n(79),j=Object(o.b)({key:"currentListState",default:[]}),d=Object(o.b)({key:"currentBreaktimeState",default:15}),b=Object(o.b)({key:"currentResultState",default:{}}),u=n(4),m=n(140),h=n(165),O=n(172),x=n(166),f=n(167),g=n(163),p=Object(g.a)({root:{padding:"2em",margin:"1em"},inputStyles:{padding:"0.5em",borderRadius:"3px",border:"1px solid #d4d4d4",width:"100%",margin:"0.5em"},formStyles:{width:"90%"},resultContainer:{border:"1px solid #d4d4d4",padding:"1em",textAlign:"center",borderRadius:"3px",marginBottom:"0.5em"},inlineDisplay:{display:"inline",paddingRight:"0.5em"},beingOnBreakContainer:{height:"30vh",padding:"0px",overflowY:"scroll"},breakOverTimeContainer:{height:"10vh",padding:"0px",overflowY:"scroll"},loadingOverlay:{position:"absolute",backgroundColor:"rgba(255,255,255,0.8)",width:"100%"},scanInputBlock:{position:"relative",marginTop:"0.5em"},iconPadding:{padding:"0.5em"},whiteColor:{color:"white"},flexDisplay:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},associateDisplay:{paddingTop:"0.2em",paddingBottom:"0.2em",borderBottom:"solid 1px #d4d4d4",paddingRight:"0.2em"},listHeader:{paddingTop:"10px",marginRight:"20px"},boldFont:{fontWeight:"bold"},bigText:{fontSize:"22px"}}),v="https://tranquil-meadow-63605.herokuapp.com/",S=Object(o.c)({key:"associatesBeingOnBreakState",get:function(e){return(0,e.get)(j).filter((function(e){return!e.time_in}))}}),y=Object(o.c)({key:"associatesBreakOverTimeState",get:function(e){var t=e.get,n=t(j),a=t(d);return n.filter((function(e){var t=new Date(e.time_out),n=new Date(e.time_in);return!!e.time_in&&n-t>60*a*1e3+3e5}))}}),k=Object(o.c)({key:"numberOfAssociatesScannedOutState",get:function(e){return(0,e.get)(j).length}}),N=Object(o.c)({key:"numberOfAssociateBackFronBreakState",get:function(e){return(0,e.get)(j).filter((function(e){return e.time_in})).length}}),C=function(e){var t=p(),n=Object(c.useState)(""),r=Object(u.a)(n,2),i=r[0],s=r[1],l=Object(c.useState)(!1),j=Object(u.a)(l,2),d=j[0],g=j[1],S=Object(c.createRef)(),y=Object(o.f)(b),N=Object(o.e)(k);Object(c.useEffect)((function(){S.current&&S.current.focus()}));return Object(a.jsx)(m.a,{className:t.root,children:Object(a.jsxs)(h.a,{container:!0,direction:"column",children:[Object(a.jsxs)(O.a,{children:[Object(a.jsx)(x.a,{variant:"h5",color:"primary",className:t.inlineDisplay,children:"Associate Scanned Out for Break"}),Object(a.jsx)(x.a,{variant:"h5",color:"textSecondary",className:t.inlineDisplay,children:N})]}),Object(a.jsxs)(O.a,{className:t.scanInputBlock,children:[Object(a.jsx)(O.a,{hidden:!d,className:t.loadingOverlay,children:Object(a.jsx)(h.a,{container:!0,alignItems:"center",justify:"center",children:Object(a.jsx)(f.a,{})})}),Object(a.jsx)("form",{className:t.formStyles,onSubmit:function(e){e.preventDefault(),g(!0),fetch(v+"badge-scan/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({badge_number:i})}).then((function(e){return e.json()})).then((function(e){"SUCCESS"===e.status?y(e):window.alert("BADGE SCAN FAILED. PLEASE TRY AGAIN")})).catch((function(e){console.log(e),window.alert("NETWORK ERROR! BADGE SCAN FAILED")})).finally((function(){g(!1),s("")}))},children:Object(a.jsx)("input",{onChange:function(e){return s(e.target.value)},value:i,className:t.inputStyles,placeholder:"Scan Associate's Badge",ref:S})})]})]})})},w=n(170),A=n(168),B=function(e){var t=Object(o.e)(S),n=p();return Object(a.jsx)(m.a,{className:n.root,children:Object(a.jsxs)(h.a,{container:!0,children:[Object(a.jsx)(x.a,{variant:"h5",color:"primary",children:"Associate Being On Break\xa0\xa0"}),Object(a.jsx)(x.a,{variant:"h5",color:"textSecondary",children:t.length}),Object(a.jsxs)(h.a,{container:!0,className:n.listHeader,children:[Object(a.jsx)(h.a,{item:!0,xs:6,sm:3,children:Object(a.jsx)(x.a,{variant:"h6",children:"Badge"})}),Object(a.jsx)(h.a,{item:!0,xs:6,sm:3,children:Object(a.jsx)(x.a,{variant:"h6",children:"Login"})}),Object(a.jsx)(h.a,{item:!0,xs:6,sm:4,children:Object(a.jsx)(x.a,{variant:"h6",children:"Name"})}),Object(a.jsx)(h.a,{item:!0,xs:6,sm:2,children:Object(a.jsx)(x.a,{variant:"h6",children:"Time"})})]}),Object(a.jsx)(A.a,{className:n.beingOnBreakContainer,children:t.map((function(e){var t=new Date(e.time_out);return Object(a.jsxs)(h.a,{container:!0,className:n.associateDisplay,children:[Object(a.jsx)(h.a,{item:!0,xs:6,sm:3,children:Object(a.jsx)(x.a,{children:e.badge_number})}),Object(a.jsx)(h.a,{item:!0,xs:6,sm:3,children:Object(a.jsx)(x.a,{children:e.user_name})}),Object(a.jsx)(h.a,{item:!0,xs:6,sm:4,children:Object(a.jsx)(x.a,{children:e.user_first_name})}),Object(a.jsx)(h.a,{item:!0,xs:6,sm:2,children:Object(a.jsxs)(x.a,{children:[t.getHours(),":",t.getMinutes()]})})]},e.badge_number)}))})]})})},_=n.p+"static/media/breaktime.e5f7e1ce.png",D=n(169),E=n(171),R=n(173);function T(){var e=p(),t=Object(o.d)(d),n=Object(u.a)(t,2),c=n[0],i=n[1],s=r.a.useState(null),l=Object(u.a)(s,2),j=l[0],b=l[1],m=function(e){i(e),b(null)};return Object(a.jsxs)("div",{children:[Object(a.jsxs)(D.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){b(e.currentTarget)},className:e.bigText,children:[c," Minutes"]}),Object(a.jsxs)(E.a,{id:"simple-menu",anchorEl:j,keepMounted:!0,open:Boolean(j),onClose:function(){b(null)},children:[Object(a.jsx)(R.a,{onClick:function(){return m(15)},children:"15 Minutes"}),Object(a.jsx)(R.a,{onClick:function(){return m(30)},children:"30 Minutes"}),Object(a.jsx)(R.a,{onClick:function(){return m(45)},children:"45 Minutes"})]})]})}var I=n(83),L=n.n(I),F=function(e){var t=p(),n=Object(o.e)(b),c=Object(o.e)(d),r=Object(o.e)(N);return Object(a.jsxs)(m.a,{className:t.root,children:[Object(a.jsxs)("div",{className:t.flexDisplay,children:[Object(a.jsx)(x.a,{variant:"h5",color:"primary",className:t.inlineDisplay,children:"Current Breaktime"}),Object(a.jsx)(L.a,{}),Object(a.jsx)(T,{})]}),Object(a.jsxs)(h.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(a.jsx)("img",{src:_,alt:"",width:"80%",height:"auto"}),function(){if(!n.status||"SUCCESS"!==n.status)return Object(a.jsx)(A.a,{className:t.resultContainer,children:Object(a.jsx)(x.a,{color:"textSecondary",children:"Awaiting Badge Scan"})});var e=n.associateData;switch(n.operation){case"BREAK_OUT":return Object(a.jsx)(A.a,{className:t.resultContainer,children:Object(a.jsxs)(x.a,{color:"textSecondary",children:["Associate ",Object(a.jsxs)("span",{className:t.boldFont,children:[e.badge_number," ",e.user_name]})," is going to break"]})});case"BREAK_IN":var r=Math.floor(n.duration/1e3/60),i=Math.floor(n.duration/1e3%60);return Object(a.jsxs)(A.a,{style:n.duration-60*c*1e3<=0?{backgroundColor:"#91ff99",color:"#04b811",border:"solid 1px #04b811"}:n.duration-60*c*1e3<=3e5?{backgroundColor:"#fbff91",color:"#e8f011",border:"solid 1px #e8f011"}:{backgroundColor:"#ff7a7a",color:"#d60d0d",border:"solid 1px #d60d0d"},className:t.resultContainer,children:[Object(a.jsxs)(x.a,{color:"textSecondary",children:["Associate ",Object(a.jsxs)("span",{className:t.boldFont,children:[e.badge_number," ",e.user_name]})," returned from break"]}),Object(a.jsxs)(x.a,{color:"textSecondary",className:t.boldFont,children:[r," Minutes ",i," Seconds"]})]});default:return Object(a.jsx)(A.a,{className:t.resultContainer,children:Object(a.jsx)(x.a,{color:"textSecondary",children:"Awaiting Badge Scan"})})}}()]}),Object(a.jsxs)(x.a,{color:"textSecondary",children:["Associates Returned From Break \xa0\xa0",r]})]})},M=function(e){var t=Object(o.e)(y),n=p();return Object(a.jsx)(m.a,{className:n.root,children:Object(a.jsxs)(h.a,{container:!0,children:[Object(a.jsx)(x.a,{variant:"h5",color:"primary",children:"Associate Taking Over Time Break\xa0\xa0"}),Object(a.jsx)(x.a,{variant:"h5",color:"textSecondary",children:t.length}),Object(a.jsxs)(h.a,{container:!0,className:n.listHeader,children:[Object(a.jsx)(h.a,{item:!0,xs:6,sm:3,children:Object(a.jsx)(x.a,{variant:"h6",children:"Badge"})}),Object(a.jsx)(h.a,{item:!0,xs:6,sm:3,children:Object(a.jsx)(x.a,{variant:"h6",children:"Login"})}),Object(a.jsx)(h.a,{item:!0,xs:6,sm:4,children:Object(a.jsx)(x.a,{variant:"h6",children:"Name"})}),Object(a.jsx)(h.a,{item:!0,xs:6,sm:2,children:Object(a.jsx)(x.a,{variant:"h6",children:"Duration"})})]}),Object(a.jsx)(A.a,{className:n.breakOverTimeContainer,children:t.map((function(e){var t=new Date(e.time_out),c=new Date(e.time_in)-t,r=c/1e3/60,i=c/1e3%60;return Object(a.jsxs)(h.a,{container:!0,className:n.associateDisplay,children:[Object(a.jsx)(h.a,{item:!0,xs:6,sm:3,children:Object(a.jsx)(x.a,{children:e.badge_number})}),Object(a.jsx)(h.a,{item:!0,xs:6,sm:3,children:Object(a.jsx)(x.a,{children:e.user_name})}),Object(a.jsx)(h.a,{item:!0,xs:6,sm:4,children:Object(a.jsx)(x.a,{children:e.user_first_name})}),Object(a.jsx)(h.a,{item:!0,xs:6,sm:2,children:Object(a.jsxs)(x.a,{children:[Math.floor(r),":",Math.floor(i)]})})]},e.badge_number)}))})]})})},P=n(84),K=n.n(P),G=n(85),H=n.n(G),U=function(e){var t=p(),n=Object(c.useState)(!1),r=Object(u.a)(n,2),i=r[0],s=r[1];return Object(a.jsxs)(h.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",children:[Object(a.jsxs)(O.a,{className:t.flexDisplay,children:[Object(a.jsx)(K.a,{className:t.iconPadding}),Object(a.jsx)(x.a,{variant:"h5",children:"DLA9 Breaktime Management App"})]}),Object(a.jsx)("div",{children:i?Object(a.jsx)(f.a,{className:t.whiteColor}):Object(a.jsx)(D.a,{onClick:function(){s(!0),fetch(v+"clear-breakroom/",{method:"POST"}).then((function(e){return e.json()})).then((function(e){"SUCCESS"!==e.status&&window.alert("FAILED TO CLEAR BREAKROOM. PLEASE TRY AGAIN LATER")})).catch((function(e){console.log(e),window.alert("NETWORK ERROR! CLEAR LIST FAILED")})).finally((function(){return s(!1)}))},variant:"text",className:t.whiteColor,endIcon:Object(a.jsx)(H.a,{}),children:"Clear List"})})]})},Y=Object(g.a)({appBarStyle:{padding:"1em"}});var J=function(){var e=Y(),t=Object(o.f)(j);return Object(c.useEffect)((function(){var e=Object(l.io)("https://tranquil-meadow-63605.herokuapp.com/");e.emit("breaktime_connect"),e.on("new_list",(function(e){t(e)}))})),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(w.a,{className:e.appBarStyle,position:"static",children:Object(a.jsx)(U,{})}),Object(a.jsxs)(h.a,{container:!0,children:[Object(a.jsxs)(h.a,{item:!0,xs:12,md:5,children:[Object(a.jsx)(C,{}),Object(a.jsx)(F,{})]}),Object(a.jsxs)(h.a,{item:!0,xs:12,md:7,children:[Object(a.jsx)(B,{}),Object(a.jsx)(M,{})]})]})]})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,176)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(o.a,{children:Object(a.jsx)(J,{})})}),document.getElementById("root")),W()},99:function(e,t,n){}},[[137,1,2]]]);
//# sourceMappingURL=main.357ae4d4.chunk.js.map